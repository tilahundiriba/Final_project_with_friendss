<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  {% block 'title' %}
  <title>Admin Dashboard</title>
  {% endblock %}
  <link rel="shortcut icon" type="image/png" href="{% static 'images2/fav.png' %}">
  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="{% static 'css2/bootstrap.min.css' %}">
  <!-- themify icons CSS -->
  <link rel="stylesheet" href="{% static 'css2/themify-icons.css' %}">
  <!-- Animations CSS -->
  <link rel="stylesheet" href="{% static 'css2/animate.css' %}">
  <!-- Main CSS -->
  <link rel="stylesheet" href="{% static 'css2/styles.css' %}">
  <link rel="stylesheet" href="{% static 'css2/green.css' %}" id="style_theme">
  <link rel="stylesheet" href="{% static 'css2/responsive.css' %}">
  <!-- morris charts -->
  <link rel="stylesheet" href="{% static 'charts/css/morris.css' %}">
  <!-- jvectormap -->
  <link rel="stylesheet" href="{% static 'css2/jquery-jvectormap.css' %}">
  <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.min.css' %}">
  <link rel="stylesheet" href="{% static 'fontawesome/css/all.min.css' %}">
  <link rel="stylesheet" href="{% static 'css/dashboard.css' %}" />
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

  <style>
    /* canvas {
      display: block;
      width: 100%;
      height: auto;
    } */
    .js-sidebar {
      display: block;
      /* Hide the div by default */
    }

    #container-min {
      display: none;
    }

    #navbar_id {
      display: block;

    }

    /* Media query for screens less than or equal to 435px */
    @media only screen and (max-width: 768px) {
      .js-sidebar {
        display: none;
        /* Display the div when the screen is 435px or less */
      }

      #container-min {
        display: block;
      }

      #navbar_id {
        display: none;
      }
    }

    .unseen {
      color: red;
    }


    .ti-announcement {
      font-size: 20px;
    }

    .ti-announcement[data-count]:after {
      position: absolute;
      /* right: -10%; */
      top: 15%;
      content: attr(data-count);
      font-size: 46%;
      padding: .6em;
      border-radius: 999px;
      line-height: .75em;
      color: white;
      background: rgba(255, 0, 0, .85);
      text-align: center;
      min-width: 2em;
      font-weight: bold;
    }

    .badge {
      width: 100px;
      height: 30px;
      padding: auto;
      padding-top: 10px;
      font-size: smaller;
    }
  </style>


</head>

<body>
  <div class="wrapper">
    <aside id="sidebar" class="js-sidebar" style="background-color: rgb(34, 146, 183);">
      <!-- Content For Sidebar -->
      <div class="h-100">

        <div class="sidebar-logo">
          <img src="{% static 'images/hospital_logo3.png' %}" alt="LOGO" class="rounded-circle" width="70"
            height="70">

        </div>

        <ul class="sidebar-nav">
          <li class="sidebar-header">Elements</li>
          <li class="sidebar-item">
            <a href="{% url 'index' %}" class="sidebar-link">
              <i class="fa-solid fa-list pe-2"></i>
              Dashboard
            </a>
          </li>
          <li class="sidebar-item">
            <a href="#" class="sidebar-link collapsed" data-bs-target="#pages" data-bs-toggle="collapse"
              aria-expanded="false"><i class="fa-solid fa-user-doctor pe-2"></i>
              Staffs
            </a>
            <ul id="pages" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
              <li class="sidebar-item">
                <a href="{% url 'createUserAccount' %}" class="sidebar-link">Add New Staff</a>
              </li>
              <li class="sidebar-item">
                <a href="{% url 'display_users' %}" class="sidebar-link">View Staff</a>
              </li>
            </ul>
          </li>
          <li class="sidebar-item">
            <a href="#" class="sidebar-link collapsed" data-bs-target="#posts" data-bs-toggle="collapse"
              aria-expanded="false"><i class="fa-solid fa-hospital-user pe-2"></i>
              Patients
            </a>
            <ul id="posts" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
            
              <li class="sidebar-item">

                <a href="{% url 'patient' %}" class="sidebar-link"> Patients</a>
              </li>
              <li class="sidebar-item">

                <a href="{% url 'vitals' %}" class="sidebar-link"> Vitalinormations</a>
              </li>
              <li class="sidebar-item">

                <a href="{% url 'dis_appointment' %}" class="sidebar-link"> Appointments</a>
              </li>
              <li class="sidebar-item">

                <a href="{% url 'history' %}" class="sidebar-link">Histories</a>
              </li>
              <li class="sidebar-item">

                <a href="{% url 'dis_perscription' %}" class="sidebar-link"> Prescriptions</a>
              </li>
            </ul>
          </li>
         
         
       
        
          <li class="sidebar-item">
            <a href="#" class="sidebar-link collapsed" data-bs-target="#lab" data-bs-toggle="collapse"
              aria-expanded="false"><i class="fa-solid fa-flask-vial pe-2"></i>
              Laboratory
            </a>
            <ul id="lab" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
            
              <li class="sidebar-item">

                <a href="{% url 'laboratories' %}" class="sidebar-link"> Laboratories</a>
              </li>
              <li class="sidebar-item">

                <a href="{% url 'medications' %}" class="sidebar-link"> Medications</a>
              </li>
             

            </ul>
          </li>
       
      
          <li class="sidebar-item">
            <a href="#" class="sidebar-link collapsed" data-bs-target="#dep" data-bs-toggle="collapse"
              aria-expanded="false"><i class="fa-solid fa-plane-departure pe-2"></i>
              Departure
            </a>
            <ul id="dep" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
              <li class="sidebar-item">

                <a href="{% url 'departed' %}" class="sidebar-link"> Departed</a>
              </li>
              <li class="sidebar-item">

                <a href="{% url 'approve_departure' %}" class="sidebar-link">Approve Departed</a>
              </li>
              <li class="sidebar-item">

                <a href="{% url 'payments' %}" class="sidebar-link"> Payments</a>
              </li>
            </ul>
          </li>
          <li class="sidebar-item">
            <a href="#" class="sidebar-link collapsed" data-bs-target="#auth" data-bs-toggle="collapse"
              aria-expanded="false"><i class="fa-solid fa-bell pe-2"></i>
              Notifications
            </a>
            <ul id="auth" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
              <li class="sidebar-item">
                <a href="{% url 'poster' %}" class="sidebar-link">Write Notifications</a>
              </li>
            </ul>
          </li>

          <li class="sidebar-item">
            <a href="#" class="sidebar-link collapsed" data-bs-target="#feed" data-bs-toggle="collapse"
              aria-expanded="false"><i class="fa-solid fa-comment pe-2"></i>
              Feedbacks
            </a>
            <ul id="feed" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
              <li class="sidebar-item">
                <a href="{% url 'display_feedback' %}" class="sidebar-link">View Feedbacks</a>
              </li>
            </ul>
          </li>
          
          <li class="sidebar-item">
            <a href="#" class="sidebar-link collapsed" data-bs-target="#report" data-bs-toggle="collapse"
              aria-expanded="false"><i class="fa-solid fa-envelopes-bulk pe-2"></i>
              Reports
            </a>
            <ul id="report" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
              <li class="sidebar-item">
                <a href="{% url 'add_report' %}" class="sidebar-link">Add Report</a>
              </li>
              <li class="sidebar-item">
                <a href="{% url 'general_report' %}" class="sidebar-link">View Report</a>
              </li>
            </ul>
          </li>
          <li class="sidebar-item">
            <a href="#" class="sidebar-link collapsed" data-bs-target="#service" data-bs-toggle="collapse"
                aria-expanded="false">
         
                <i class="fa-brands fa-servicestack pe-2"></i>
                            Services
            </a>
            <ul id="service" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                <li class="sidebar-item">
                    <a href="{% url 'add_service' %}" class="sidebar-link">
                        Add Service</a>
                </li>
                <li class="sidebar-item">
                    <a href="{% url 'dis_service' %}" class="sidebar-link">
                        View Service</a>
                </li>
                
            </ul>
        </li>
        <li class="sidebar-item">
          <a href="#" class="sidebar-link collapsed" data-bs-target="#setting" data-bs-toggle="collapse"
              aria-expanded="false">
       
              <i class="fa-solid fa-language pe-2"></i>
                          Language
          </a>
          <ul id="setting" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
              <li class="sidebar-item">
                  <a href="#" class="sidebar-link">
                      <div id="google_translate_element" class=""></div></a>
              </li>
              
          </ul>
      </li>
          
        </ul>
      </div>
    </aside>
    <div class="main">
      <nav class="navbar navbar-expend px-3 border-bottom  text-white" id="navbar_id">
        <button class="btn " id="sidebar-toggle" type="button">
          <span class="navbar-toggler-icon "></span>
        </button>
        <!-- <img src="{% static 'images/profile.jpg'%}" class="avatar img-fluid rounded" alt="" /> -->

      </nav>
      <main class="content px-3 py-2 bg-light">
        <div class="container top-brand">
          <nav class="navbar navbar-default">
            <div class="navbar-header">
              <div class="sidebar-header"> <a href="#"><img src="{% static 'images/hospital_logo3.png' %}" class="logo"
                    alt="logo" style="width: 50px; height: 50px; border-radius: 50%;"></a>
              </div>
            </div>
            <ul class="nav justify-content-end">
              <li class="nav-item">
                <a class="nav-link">
                  <span title="Fullscreen" class="ti-fullscreen fullscreen"></span>
                </a>
              </li>
        
              <li class="nav-item">
                <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
                  aria-expanded="false">
                  <span id="bellCount" class="ti-announcement" data-count="{{unseen_count}}"></span>
                </a>
                <div class="dropdown-menu proclinic-box-shadow2 notifications animated flipInY">
                  <h5>Notifications</h5>
                  <ul style="overflow: auto; max-height: 300px; max-width: 200px;">

                    {% include 'admin_dash/seeNotifications.html' %}

                  </ul> <!-- Empty <ul> element to contain the notifications -->
                </div>
              </li>
              <li class="nav-item">
                <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
                  aria-expanded="false">
                  <img src="{{ user.userprofileinfo.profile_pic.url}}" alt="NOOOOOOo" class="rounded-circle" width="40"
                    height="40">
                </a>

                <div class="dropdown-menu proclinic-box-shadow2 profile animated flipInY">
                  <h5>{{ request.user.username }}</h5>
                  <a class="dropdown-item text-dark" href="{% url 'admin_profile' %}">
                    <span class="ti-image"></span> Profile</a>
                  <a class="dropdown-item text-dark" href="{% url 'logout' %}">
                    <span class="ti-power-off"></span> Logout</a>
                </div>
              </li>
            </ul>

          </nav>
        </div>

        <!-- Menu -->
        {% include 'admin_dash/navbar.html' %}
        <!-- /Menu -->
        <!-- Breadcrumb -->

        {% block content %}

        <body>
          <!-- Pre Loader -->
          <div class="loading">
            <div class="spinner">
              <div class="double-bounce1"></div>
              <div class="double-bounce2"></div>
            </div>
          </div>
          <!--/Pre Loader -->
          <!-- Color Changer -->
        
          <!-- /Color Changer -->
          <div class="wrapper">		
            <!-- Page Content -->
            <div id="content">
        
              <!-- Page Title -->
              <div class="container mt-0">
                <div class="row breadcrumb-bar">
                  <div class="col-md-6">
                    <h3 class="block-title">Quick Statistics</h3>
                  </div>
                  <div class="col-md-6">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item">
                        <a href="index.html">
                          <span class="ti-home"></span>
                        </a>
                      </li>
                      <li class="breadcrumb-item active">Dashboard</li>
                    </ol>
                  </div>
                </div>
              </div>
              <!-- /Page Title -->
              <!-- /Breadcrumb -->
              <!-- Main Content -->
              <div class="container home">
                <div class="row">
                  <!-- Widget Item -->
                  <div class="col-md-4">
                    <div class="widget-area proclinic-box-shadow color-red">
                      <div class="widget-left">
                        <span class="ti-user"></span>
                      </div>
                      <div class="widget-right">
                        <h4 class="wiget-title text-success">Total Patients</h4>
                        <span class="numeric color-red">{{number_patients}}</span>
                        
                        <p class="inc-dec mb-0"><span class="ti-angle-up"></span> +20% Increased</p>
                      </div>
                    </div>
                  </div>
                  <!-- /Widget Item -->
                  <!-- Widget Item -->
                  <div class="col-md-4">
                    <div class="widget-area proclinic-box-shadow color-green">
                      <div class="widget-left">
                        <span class="ti-timer"></span>
                      </div>
                      <div class="widget-right">
                        <h4 class="wiget-title text-success">Total Appointments </h4>
                        <span class="numeric color-green">{{number_of_app}}</span>
                        <p class="inc-dec mb-0"><span class="ti-angle-down"></span> +15% Increased</p>
                      </div>
                    </div>
                  </div>
                  <!-- /Widget Item -->
                  <!-- Widget Item -->
                  <div class="col-md-4">
                    <div class="widget-area proclinic-box-shadow color-yellow">
                      <div class="widget-left">
                        <span class="ti-wallet"></span>
                      </div>
                      <div class="widget-right">
                        <h4 class="wiget-title text-success">Total Revenue</h4>
                        <span class="numeric color-yellow">{{total_amount}}Birr</span>
                        <p class="inc-dec mb-0"><span class="ti-angle-up"></span> +10% Increased</p>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-4">
                    <div class="widget-area proclinic-box-shadow color-red">
                      <div class="widget-left">
                        <span class="ti-na"></span>
                      </div>
                    
                      <div class="widget-right">
                        <h4 class="wiget-title text-success">Total Prescriptions</h4>
                        <span class="numeric color-red">{{number_of_Presc}}</span>
                        
                        <p class="inc-dec mb-0"><span class="ti-angle-up"></span> +20% Increased</p>
                      </div>
                    </div>
                  </div>
                  <!-- /Widget Item -->
                  <!-- Widget Item -->
                  <div class="col-md-4">
                    <div class="widget-area proclinic-box-shadow color-green">
                      <div class="widget-left">
                        <span class="ti-bookmark-alt"></span>
                      </div>
                      <div class="widget-right">
                        <h4 class="wiget-title text-success">Total Histories</h4>
                        <span class="numeric color-green">{{number_of_history}}</span>
                        <p class="inc-dec mb-0"><span class="ti-angle-down"></span> +15% Increased</p>
                      </div>
                    </div>
                  </div>
                  <!-- /Widget Item -->
                  <!-- Widget Item -->
                  <div class="col-md-4">
                    <div class="widget-area proclinic-box-shadow color-yellow">
                      <div class="widget-left">
                        <span class=" ti-filter"></span>
                      </div>
                      <div class="widget-right">
                        <h4 class="wiget-title text-success">Total Laboratories</h4>
                        <span class="numeric color-yellow">{{number_of_lab}}</span>
                        <p class="inc-dec mb-0"><span class="ti-angle-up"></span> +10% Increased</p>
                      </div>
                    </div>
                  </div>
                  <!-- /Widget Item -->
                </div>
        
                <div class="row">
                  <!-- Widget Item -->
                  <div class="col-md-6">
                    <div class="widget-area-2 proclinic-box-shadow">
                      <h3 class="widget-title">Appointments Year by Year</h3>
                      <div id="lineMorris" class="chart-home"></div>
                    </div>
                  </div>
                  <!-- /Widget Item -->
                  <!-- Widget Item -->
                  <div class="col-md-6">
                    <div class="widget-area-2 proclinic-box-shadow">
                      <h3 class="widget-title"> Patients Year by Year</h3>
                      <div id="barMorris" class="chart-home"></div>
                    </div>
                  </div>
                  <!-- /Widget Item -->
                </div>
        
               
        
                <div class="row">
                  <!-- Widget Item -->
                  <div class="col-sm-6">
                    <div class="widget-area-2 proclinic-box-shadow">
                      <h3 class="widget-title">Appointments Status</h3>
                      <div id="donutMorris" class="chart-home"></div>
                    </div>
                  </div>
                  <!-- /Widget Item -->
                  <!-- Widget Item -->
                  <div class="col-sm-6">
                    <div class="widget-area-2 proclinic-box-shadow">
                      <h3 class="widget-title">Payments Status</h3>
                      <div id="donutMorris2" class="chart-home"></div>
                    </div>
                  </div>
                  <!-- /Widget Item -->
              
        
                </div>
              	{% if unseen_feedbacks %}
				<div class="row">
					<!-- Widget Item -->
					<div class="col-md-12">
						<div class="widget-area-2 proclinic-box-shadow">
							<h3 class="widget-title">Feedbacks</h3>
							<div class="table-responsive">
								<table class="table table-bordered table-striped" id="tableid">
									<thead>
										<tr>
											<th> Name</th>
											<th>Email</th>
											<th>Feedbacks</th>
											<th>Date</th>
											<th>Actions</th>
										
										</tr>
									</thead>
									<tbody>
										{% for feedback in unseen_feedbacks %}
										<tr>
											<td>{{ feedback.Name }}</td>
											<td>{{ feedback.Email }}</td>
											<td>{{ feedback.Feedback }}</td>
											<td>{{ feedback.Added_no }}</td>
									
										
                        <td>
                          <form action="{% url 'mark_as_read' feedback.Added_no  %}" method="post">
                            {% csrf_token %}
                            <button type="submit"
                            class="btn btn-outline-info "><span
                              class="ti-eye"></span>mark as read</button>
                          </form>
                        
                        </td>
											
										</tr>
										{% endfor %}
									</tbody>
								</table>
                <nav aria-label="Page navigation example">
									<ul class="pagination justify-content-center export-pagination">
										
									</ul>
								</nav>
							</div>
						</div>
					</div>
					<!-- /Widget Item -->
				</div>
				{% endif %}
              </div>
              <!-- /Main Content -->
              <!--Copy Rights-->
              <div class="container">
                <div class="d-sm-flex justify-content-center">
                  <span class="text-muted text-center d-block d-sm-inline-block">Copyright Â© 2018 <a href="http://www.konnectplugins.com/" target="_blank">konnectcode</a>. All rights reserved.</span>
                </div>
              </div>
              <!-- /Copy Rights-->
            </div>
            <!-- /Page Content -->
          </div>
          <!-- Back to Top -->
          <a id="back-to-top" href="#" class="back-to-top">
            <span class="ti-angle-up"></span>
          </a>
          <!-- /Back to Top -->
          <!-- Jquery Library-->
          <script>
            var insurance = "{{insurance_total_sum}}"
            var cash = "{{cash_total_sum}}"
            if($("#donutMorris2").length == 1){
           var $donutData = [
            { label: "Cash", value: cash },
            { label: "Insurance", value: insurance }
          ];
          Morris.Donut({
            element: 'donutMorris2',
            data: $donutData,
            barSize: 0.1,
            labelColor: '#3e5569',
            resize: true, //defaulted to true
            colors: ['#FFAA2A', '#22c6ab']
          });
          }
          </script>
        </body>


        {% endblock %}
      </main>
      <!-- <a href="#" class="theme-toggle">
        <i class="fa-regular fa-moon"></i>
        <i class="fa-regular fa-sun"></i>
      </a> -->
    </div>
  </div>
  <script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
  <script>

    function googleTranslateElementInit() {
      new google.translate.TranslateElement(
        { pageLanguage: 'en', defaultLanguage: 'en' },
        'google_translate_element'
      );
    } 
  </script>
  <script src="{% static 'js2/jquery-3.2.1.min.js' %}"></script>
  <!-- Popper Library-->
  <script src="{% static 'js2/popper.min.js' %}"></script>
  <!-- Bootstrap Library-->
  <script src="{% static 'js2/bootstrap.min.js' %}"></script>
  <!-- morris charts -->
  <script src="{% static 'charts/js/raphael-min.js' %}"></script>
  <script src="{% static 'charts/js/morris.min.js' %}"></script>
  <script src="{% static 'js2/custom-morris.js' %}"></script>

  <!-- Custom Script-->
  <script src="{% static 'js2/custom.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="{% static 'js/scripts.js' %}"></script>
  <script>
    var insurance = "{{insurance_total_sum}}"
    var cash = "{{cash_total_sum}}"
    if($("#donutMorris2").length == 1){
   var $donutData2 = [
    { label: "Cash", value: cash },
    { label: "Insurance", value: insurance }
  ];
  Morris.Donut({
    element: 'donutMorris2',
    data: $donutData2,
    barSize: 0.1,
    labelColor: '#3e5569',
    resize: true, //defaulted to true
    colors: ['#FFAA2A', '#22c6ab']
  });
  }
  var cancelled = "{{number_of_cancelled}}"
  var pending = "{{number_of_pending}}"
  var completed = "{{number_of_completed}}"
  if($("#donutMorris").length == 1){
   var $donutData = [
    { label: "Pending", value: pending },
    { label: "Completed", value: completed },
    { label: "Cancelled", value: cancelled }
  ];
  Morris.Donut({
    element: 'donutMorris',
    data: $donutData,
    barSize: 0.1,
    labelColor: '#3e5569',
    resize: true, //defaulted to true
    colors: ['#FFAA2A', '#ef6e6e', '#22c6ab']
  });}
  </script>
  <!-- <script>
		// JavaScript code for pagination
		document.addEventListener('DOMContentLoaded', function () {
			// Get the table rows and calculate total pages
			var tableRows = document.querySelectorAll('#mytable tbody tr');
			var totalPages = Math.ceil(tableRows.length / 5);

			// Generate pagination links
			var paginationContainer = document.querySelector('.pagination');
			for (var i = 1; i <= totalPages; i++) {
				var pageLink = document.createElement('a');
				pageLink.href = '#';
				pageLink.textContent = i;
				pageLink.addEventListener('click', function (event) {
					event.preventDefault();
					showPage(parseInt(this.textContent));
				});
				paginationContainer.appendChild(pageLink);
			}

			// Function to show page
			function showPage(pageNumber) {
				// Hide all table rows
				tableRows.forEach(function (row) {
					row.style.display = 'none';
				});

				// Calculate start and end indexes for current page
				var startIndex = (pageNumber - 1) * 5;
				var endIndex = startIndex + 5;

				// Show table rows for current page
				for (var i = startIndex; i < endIndex && i < tableRows.length; i++) {
					tableRows[i].style.display = '';
				}
			}

			// Show the first page by default
			showPage(1);
		});
	</script> -->
</body>

</html>