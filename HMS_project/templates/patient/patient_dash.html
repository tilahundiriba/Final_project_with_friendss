<!DOCTYPE html>
{% load static %}
<html lang="en" data-bs-theme="dark">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    {% block 'title' %}
    <title>Patient Dashboard</title>
    {% endblock %}
    <!-- Fav  Icon Link -->
    <link rel="shortcut icon" type="image/png" href="{% static 'images2/fav.png' %}">
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="{% static 'css2/bootstrap.min.css' %}">
    <!-- themify icons CSS -->
    <link rel="stylesheet" href="{% static 'css2/themify-icons.css' %}">
    <!-- Animations CSS -->
    <link rel="stylesheet" href="{% static 'css2/animate.css' %}">
    <!-- Main CSS -->
    <link rel="stylesheet" href="{% static 'css2/styles.css' %}">
    <link rel="stylesheet" href="{% static 'css2/green.css' %}" id="style_theme">
    <link rel="stylesheet" href="{% static 'css2/responsive.css' %}">
    <!-- morris charts -->
    <link rel="stylesheet" href="{% static 'charts/css/morris.css' %}">
    <!-- jvectormap -->
    <link rel="stylesheet" href="{% static 'css2/jquery-jvectormap.css' %}">

    <script src="{% static 'js2/modernizr.min.js' %}"></script>
    <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'fontawesome/css/all.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}" />
    <!-- <script
      src="https://kit.fontawesome.com/ae360af17e.js"
      crossorigin="anonymous"
    ></script> -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

    <style>
        /* Default style for the div */
        .js-sidebar {
            display: block;
            /* Hide the div by default */
        }

        #container-min {
            display: none;
        }

        #navbar_id {
            display: block;

        }

        /* Media query for screens less than or equal to 435px */
        @media only screen and (max-width: 768px) {
            .js-sidebar {
                display: none;
                /* Display the div when the screen is 435px or less */
                
            }

            #container-min {
                display: block;
            }

            #navbar_id {
                display: none;
            }
        }




   
    </style>


</head>

<body>
    <div class="wrapper">
        <aside id="sidebar" class="js-sidebar" style="background-color: rgb(34, 146, 183);">
            <!-- Content For Sidebar -->
            <div class="h-100">
               
                
                <div class="sidebar-logo">
                    <img src="{% static 'images/hospital_logo3.png' %}" alt="LOGO"
                    class="rounded-circle"
                    width="70"
                    height="70">
                 
                </div>
          
                <ul class="sidebar-nav">
                    <li class="sidebar-header">Elements</li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link">
                            <i class="fa-solid fa-list pe-2"></i>
                            Dashboard
                        </a>
                    </li>

                    <li class="sidebar-item">
                        <a href="{% url 'write_feedback' %}" class="sidebar-link collapsed" 
                            aria-expanded="false"><i class="fa-solid fa-comment pe-2"></i>
                            Feedback
                        </a>
                        
                    </li>
                    <li class="sidebar-item">
                        <a href="{% url 'patient_info' %}" class="sidebar-link collapsed"
                            aria-expanded="false"><i class="fa-solid fa-circle-info pe-2"></i>
                            Information
                        </a>
                      
                    </li>
                    
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link collapsed" data-bs-target="#setting" data-bs-toggle="collapse"
                            aria-expanded="false">
                     
                            <i class="fa-solid fa-language pe-2"></i>
                            Language
                        </a>
                        <ul id="setting" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a href="#" class="sidebar-link">
                                    <div id="google_translate_element" class=""></div></a>
                            </li>
                            
                        </ul>
                    </li>
                   
                </ul>
            </div>
        </aside>
        <div class="main">
            <nav class="navbar navbar-expend px-3 border-bottom" id="navbar_id">
                <button class="btn text-dark" id="sidebar-toggle" type="button">
                    <span class="navbar-toggler-icon text-white"></span>
                </button>
                <!-- <img src="{% static 'images/profile.jpg'%}" class="avatar img-fluid rounded" alt="" /> -->

            </nav>
            <main class="content px-3 py-2 bg-light">
                <div class="container top-brand">
					<nav class="navbar navbar-default">			
						<div class="navbar-header">
							<div class="sidebar-header"> <a href="#">
                                <img src="{% static 'images/hospital_logo3.png' %}" class="logo" alt="logo" style="width: 50px; height: 50px; border-radius: 50%;"></a>
							</div>
						</div>
						<ul class="nav justify-content-end">
							<li class="nav-item">
								<a class="nav-link">
									<span title="Fullscreen" class="ti-fullscreen fullscreen"></span>
								</a>							
							</li>
							
                            <li class="nav-item">
                                <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
                                  aria-expanded="false">
                                  <span id="bellCount" class="ti-announcement" ></span>
                                </a>
                                <div class="dropdown-menu proclinic-box-shadow2 notifications animated flipInY" >
                                  <h5>Notifications</h5>
                                  <ul style="overflow: auto; max-height: 300px; max-width: 200px;">
                                
                                    
                                
                                  </ul> <!-- Empty <ul> element to contain the notifications -->
                                </div>
                              </li>
                        
                            
							<li class="nav-item">
								<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
								 aria-expanded="false">
                                 <img src="{{ user.userprofileinfo2.profile_pic.url}}" alt="Profile"
                                 class="rounded-circle"
                                 width="40"
                                 height="40">
								</a>
								<div class="dropdown-menu proclinic-box-shadow2 profile animated flipInY">
									<h5>{{user.username}}</h5>
									<a class="dropdown-item" href="#">
										<span class="ti-image"></span> Profile</a>
									<a class="dropdown-item" href="{% url 'logout' %}">
										<span class="ti-power-off"></span> Logout</a>
								</div>
							</li>
						</ul>
				
					</nav>
				</div>
                	<!-- /Menu -->
			{% include 'patient/navbar.html' %}
			<!-- Breadcrumb -->
                {% block content %}
              
                </nav>
                <main class="content px-3 py-2 " >
                    <div class="container-fluid">
                        <div class="mb-3">
                            <h4>Dashboard</h4>
                        </div>
            
                        </div>
                        <!-- Table Element -->
                        <div class="container">
                            <div class="row">
                        
                                <!-- /Widget Item -->
                                <!-- Widget Item -->
                                <div class="col-md-12">
                                    <div class="row">
                                        {% for user in combined_data %}
                                        <div class="col-md-4 mb-4">
                                            <div class="card">
                                                <div class="card-body">
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <img src="{{ user.profile }}" alt="Profile" width="100" height="100">
                                                        </div>
                                                        <div class="col-md-8">
                                                            <h5 class="card-title"><strong>Name:</strong> {{ user.first_name }} {{ user.last_name }}</h5>
                                                            <p class="card-text"><strong>Email:</strong> {{ user.email }}</p>
                                                            <p class="card-text"><strong>Role:</strong> {{ user.role }}</p>
                                                            <p class="card-text"><strong>Specialization:</strong> {{ user.special }}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                
                                <!-- /Widget Item -->
                            </div>
                        </div>
                    </div>
                    {% endblock %}
                </main>
                <a href="#" class="theme-toggle">
                    <i class="fa-regular fa-moon"></i>
                    <i class="fa-regular fa-sun"></i>
                </a>
             
                  
        </div>
    </div>
<!-- scripts for notification start-->

<!-- <script>
    // setup chat socket
    const notifySocket = new WebSocket(
        'ws://'
        + window.location.host
        + '/ws/notify/'
    );

    // Array to store all notifications
    let notifications = [];

    // Array to store unseen notifications
    let unseenNotifications = [];

    // on socket open
    notifySocket.onopen = function (e) {
        console.log('Socket successfully connected.');
        // loadNotifications(); // Load notifications from the server when the socket is opened
    };

    // on socket close
    notifySocket.onclose = function (e) {
        console.log('Socket closed unexpectedly');
    };

    // on receiving message on group
    notifySocket.onmessage = function (e) {
        const data = JSON.parse(e.data);
        const message = data.message;
        // Call the setMessage function to add the new li element
        setMessage(message);
    };

    function setMessage(message) {
    // Create a new anchor element
    var newAnchor = document.createElement('a');
    newAnchor.className = 'dropdown-item text-wrap unseen'; // Add the "unseen" class
    newAnchor.href = '#';
    newAnchor.textContent = message; // Set the text content of the anchor to the received message
    
    // Get the ul element with the id "notificationList"
    var ulElement = document.getElementById('notificationList');
    
    // Append the new anchor element to the ul element
    ulElement.appendChild(newAnchor);
    
    // Add the notification to the array
    notifications.push(newAnchor);
    
    // Add the unseen notification to the unseen array
    unseenNotifications.push(newAnchor);
    
    // Get the current count of unseen notifications
    var count = unseenNotifications.length;
    
    // Update the count on the bell icon
    document.getElementById('bellCount').setAttribute('data-count', count);
    
    // Decrease the count by 1 when the user views the notification
    newAnchor.addEventListener('click', function() {
        if (count > 0) {
            count -= 1;
            document.getElementById('bellCount').setAttribute('data-count', count);
            newAnchor.classList.remove('unseen'); // Remove the "unseen" class
        }
    });
}

    
    


</script> -->
<!-- scripts for notification end-->

<script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script>

  function googleTranslateElementInit() {
    new google.translate.TranslateElement(
      { pageLanguage: 'en', defaultLanguage: 'en' },
      'google_translate_element'
    );
  } 
</script>
    <!-- Jquery Library-->
    <script src="{% static 'js2/jquery-3.2.1.min.js' %}"></script>
    <!-- Popper Library-->
    <script src="{% static 'js2/popper.min.js' %}"></script>
    <!-- Bootstrap Library-->
    <script src="{% static 'js2/bootstrap.min.js' %}"></script>

    <!-- Datatable  -->
    <script src="{% static 'datatable/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'datatable/dataTables.bootstrap4.min.js' %}"></script>

    <!-- Custom Script-->
    <script src="{% static 'js2/custom.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/scripts.js' %}"></script>
</body>

</html>