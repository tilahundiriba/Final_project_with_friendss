<!DOCTYPE html>
{% load static %}
<html lang="en" data-bs-theme="dark">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    {% block 'title' %}
    <title></title>
    {% endblock %}
    <!-- Fav  Icon Link -->
    <link rel="shortcut icon" type="image/png" href="{% static 'images2/fav.png' %}">
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="{% static 'css2/bootstrap.min.css' %}">
    <!-- themify icons CSS -->
    <link rel="stylesheet" href="{% static 'css2/themify-icons.css' %}">
    <!-- Animations CSS -->
    <link rel="stylesheet" href="{% static 'css2/animate.css' %}">
    <!-- Main CSS -->
    <link rel="stylesheet" href="{% static 'css2/styles.css' %}">
    <link rel="stylesheet" href="{% static 'css2/green.css' %}" id="style_theme">
    <link rel="stylesheet" href="{% static 'css2/responsive.css' %}">
    <!-- morris charts -->
    <link rel="stylesheet" href="{% static 'charts/css/morris.css' %}">
    <!-- jvectormap -->
    <link rel="stylesheet" href="{% static 'css2/jquery-jvectormap.css' %}">

    <script src="{% static 'js2/modernizr.min.js' %}"></script>
    <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'fontawesome/css/all.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}" />
    <!-- <script
      src="https://kit.fontawesome.com/ae360af17e.js"
      crossorigin="anonymous"
    ></script> -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

    <style>
        /* Default style for the div */
        .js-sidebar {
            display: block;
            /* Hide the div by default */
        }

        #container-min {
            display: none;
        }

        #navbar_id {
            display: block;

        }

        /* Media query for screens less than or equal to 435px */
        @media only screen and (max-width: 768px) {
            .js-sidebar {
                display: none;
                /* Display the div when the screen is 435px or less */
                
            }

            #container-min {
                display: block;
            }

            #navbar_id {
                display: none;
            }
        }




    .unseen {
        color: red;
    }


    .ti-announcement {
        font-size: 20px;
    }

    .ti-announcement[data-count]:after {
        position: absolute;
        /* right: -10%; */
        top: 15%; 
        content: attr(data-count);
        font-size: 46%;
        padding: .6em;
        border-radius: 999px;
        line-height: .75em;
        color: white;
        background: rgba(255, 0, 0, .85);
        text-align: center;
        min-width: 2em;
        font-weight: bold;
    }

    .badge{
        width: 100px;
        height: 30px;
        padding: auto;
        padding-top: 10px;
        font-size: smaller;
    }
    .pagination {
			margin-top: 20px;
			text-align: center;
			/* Center the pagination links */
		}

		.pagination a {
			display: inline-block;
			margin: 0 5px;
			/* Add space between pagination links */
			padding: 8px 12px;
			/* Increase padding for larger size */
			font-size: 16px;
			/* Increase font size */
			color: #007bff;
			/* Change text color */
			border: 1px solid #007bff;
			/* Add border */
			border-radius: 5px;
			/* Add border radius */
			text-decoration: none;
			/* Remove underline */
		}

		.pagination a:hover {
			background-color: #007bff;
			/* Change background color on hover */
			color: #fff;
			/* Change text color on hover */
		}
    </style>


</head>

<body>
    <div class="wrapper">
        <aside id="sidebar" class="js-sidebar" style="background-color: rgb(34, 146, 183);">
            <!-- Content For Sidebar -->
            <div class="h-100">
               
                
                <div class="sidebar-logo">
                    <img src="{% static 'images/hospital_logo3.png' %}" alt="NOOOOOOo"
                    class="rounded-circle"
                    width="70"
                    height="70">
                 
                </div>
          
                <ul class="sidebar-nav">
                    <li class="sidebar-header">Elements</li>
                    <li class="sidebar-item">
                        <a href="{% url 'dis_dr_dash_content' %}" class="sidebar-link">
                            <i class="fa-solid fa-list pe-2"></i>
                            Dashboard
                        </a>
                    </li>

                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link collapsed" data-bs-target="#posts" data-bs-toggle="collapse"
                            aria-expanded="false"><i class="fa-solid fa-hospital-user pe-2"></i>
                            Histories
                        </a>
                        <ul id="posts" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a href="{% url 'add_history' %}" class="sidebar-link">Add History</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="{% url 'dis_history' %}" class="sidebar-link">View History</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="{% url 'check_patient_data' %}" class="sidebar-link">Check Patients</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link collapsed" data-bs-target="#auth" data-bs-toggle="collapse"
                            aria-expanded="false">
                            <i class="fa-regular fa-calendar-check pe-2"></i>
                            Appointments
                        </a>
                        <ul id="auth" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a href="{% url 'add-appointment' %}" class="sidebar-link">Set Appointments</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="#" class="sidebar-link">Edit Appointments</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="{% url 'dis-appointment' %}" class="sidebar-link">View Appointments</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="{% url 'about-appointment' %}" class="sidebar-link">About Appointments</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link collapsed" data-bs-target="#auth2" data-bs-toggle="collapse"
                            aria-expanded="false">
                            <i class="fa-solid fa-prescription-bottle-medical pe-2"></i>
                            Prescriptions
                        </a>
                        <ul id="auth2" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a href="{% url 'add_perscription' %}" class="sidebar-link">Set Prescription</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="#" class="sidebar-link">Edit Prescription</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="{% url 'perscriptions' %}" class="sidebar-link">View Prescription</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="#" class="sidebar-link">About Prescription</a>
                            </li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link collapsed" data-bs-target="#feed" data-bs-toggle="collapse"
                            aria-expanded="false">
                            <!-- <i class="fa-regular fa-flask-vial pe-2"></i> -->
                            <i class="fa-solid fa-flask-vial pe-2"></i>
                            Laboratory
                        </a>


                        <ul id="feed" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a href="{% url 'add_lab' %}" class="sidebar-link">Add Lab Test</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="{% url 'lab_tests' %}" class="sidebar-link">View Lab Test</a>
                            </li>
                            <li class="sidebar-item">
                                <a href="{% url 'dis_lab_results' %}" class="sidebar-link">View Lab Results</a>
                            </li>
                           
                        </ul>
                    </li>
     
                    <li class="sidebar-item">
                        <a href="#" class="sidebar-link collapsed" data-bs-target="#setting" data-bs-toggle="collapse"
                            aria-expanded="false">
                     
                            <i class="fa-solid fa-language pe-2"></i>
                            Language
                        </a>
                        <ul id="setting" class="sidebar-dropdown list-unstyled collapse" data-bs-parent="#sidebar">
                            <li class="sidebar-item">
                                <a href="#" class="sidebar-link">
                                    <div id="google_translate_element" class=""></div></a>
                            </li>
                            
                        </ul>
                    </li>
                   
                </ul>
            </div>
        </aside>
        <div class="main">
            <nav class="navbar navbar-expend px-3 border-bottom" id="navbar_id">
                <button class="btn text-dark" id="sidebar-toggle" type="button">
                    <span class="navbar-toggler-icon text-white"></span>
                </button>
                <!-- <img src="{% static 'images/profile.jpg'%}" class="avatar img-fluid rounded" alt="" /> -->

            </nav>
            <main class="content px-3 py-2 bg-light">
                <div class="container top-brand">
					<nav class="navbar navbar-default">			
						<div class="navbar-header">
							<div class="sidebar-header"> <a href="index.html">
                                <img src="{% static 'images/hospital_logo3.png' %}" class="logo" alt="logo" style="width: 50px; height: 50px; border-radius: 50%;"></a>
							</div>
						</div>
						<ul class="nav justify-content-end">
							<li class="nav-item">
								<a class="nav-link">
									<span title="Fullscreen" class="ti-fullscreen fullscreen"></span>
								</a>							
							</li>
							
                            <li class="nav-item">
                                <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
                                  aria-expanded="false">
                                  <span id="bellCount" class="ti-announcement" data-count="{{unseen_count}}"></span>
                                </a>
                                <div class="dropdown-menu proclinic-box-shadow2 notifications animated flipInY" >
                                  <h5>Notifications</h5>
                                  <ul style="overflow: auto; max-height: 300px; max-width: 200px;">
                                
                                    {% include 'admin_dash/seeNotifications.html' %}
                                
                                  </ul> <!-- Empty <ul> element to contain the notifications -->
                                </div>
                              </li>
                        
                            
							<li class="nav-item">
								<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true"
								 aria-expanded="false">
                                 <img src="{{ user.userprofileinfo.profile_pic.url}}" alt="NOOOOOOo"
                                 class="rounded-circle"
                                 width="40"
                                 height="40">
								</a>
								<div class="dropdown-menu proclinic-box-shadow2 profile animated flipInY">
									<h5>{{user.username}}</h5>
									<a class="dropdown-item" href="{% url 'show_doctor_profile' %}">
										<span class="ti-image"></span> Profile</a>
									<a class="dropdown-item" href="{% url 'logout' %}">
										<span class="ti-power-off"></span> Logout</a>
								</div>
							</li>
						</ul>
				
					</nav>
				</div>
                	<!-- /Menu -->
			{% include 'doctor/navbar.html' %}
			<!-- Breadcrumb -->
                {% block content %}
              
                </nav>
                <main class="content px-3 py-2 " >
                    <div class="container-fluid">
                        <div class="mb-3">
                            <h4>Dashboard</h4>
                        </div>
                        <div class="row">
                            <div class="col-12 col-md-6 d-flex">
                                <div class="card flex-fill border-0 illustration">
                                    <div class="card-body p-0 d-flex flex-fill">
                                        <div class="row g-0 w-100">
                                            <div class="col-6">
                                                <div class="p-3 m-1">
                                                    <h1>200</h1>
                                                    <p class="mb-0" style="font-size: large">Employees</p>
                                                </div>
                                            </div>

                                            <div class="col-6 align-self-end text-end">
                                                <img src="{% static 'images/staffs.png' %}"
                                                    class="img-fluid illustration-img" alt="" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md-6 d-flex">
                                <div class="card flex-fill border-0 illustration">
                                    <div class="card-body p-0 d-flex flex-fill">
                                        <div class="row g-0 w-100">
                                            <div class="col-6">
                                                <div class="p-3 m-1">
                                                    <h1>45</h1>
                                                    <p class="mb-0" style="font-size: large">Doctors</p>
                                                </div>
                                            </div>
                                            <div class="col-6 align-self-end text-end">
                                                <img src="{% static 'images/staffs.png' %}"
                                                    class="img-fluid illustration-img" alt="" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-md-6 d-flex">
                                <div class="card flex-fill border-0 illustration">
                                    <div class="card-body p-0 d-flex flex-fill">
                                        <div class="row g-0 w-100">
                                            <div class="col-6">
                                                <div class="p-3 m-1">
                                                    <h1>390</h1>
                                                    <p class="mb-0" style="font-size: large">Patients</p>
                                                </div>
                                            </div>
                                            <div class="col-6 align-self-end text-end">
                                                <img src="{% static 'images/staffs.png' %}"
                                                    class="img-fluid illustration-img" alt="" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-md-6 d-flex">
                                <div class="card flex-fill border-0 illustration">
                                    <div class="card-body p-0 d-flex flex-fill">
                                        <div class="row g-0 w-100">
                                            <div class="col-6">
                                                <div class="p-3 m-1">
                                                    <h1>390</h1>
                                                    <p class="mb-0" style="font-size: large">Patients</p>
                                                </div>
                                            </div>
                                            <div class="col-6 align-self-end text-end">
                                                <img src="{% static 'images/staffs.png' %}"
                                                    class="img-fluid illustration-img" alt="" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                       
                                <div class="card flex-fill border-0">
                                    <div class="card-body py-4">
                                        <div class="d-flex align-items-start">
                                            <div class="flex-grow-1" style="width:10px; margin:auto;">
                                                <canvas id="myChart"></canvas>

                                                <script>
                                                    var xValues = [
                                                        "Italy",
                                                        "France",
                                                        "Spain",
                                                        "USA",
                                                        "Argentina",
                                                    ];
                                                    var yValues = [55, 45, 35, 25, 15];
                                                    var barColors = [
                                                        "#ff9999",
                                                        "#80ff00",
                                                        "#00bfff",
                                                        "#ffbf00",
                                                        "#b34d4d",
                                                    ];

                                                    new Chart("myChart", {
                                                        type: "bar",
                                                        data: {
                                                            labels: xValues,
                                                            datasets: [
                                                                {
                                                                    backgroundColor: barColors,
                                                                    data: yValues,
                                                                },
                                                            ],
                                                        },
                                                        options: {
                                                            legend: { display: false },
                                                            title: {
                                                                display: true,
                                                                text: "Users Number In Hospital",
                                                            },
                                                            responsive: true, // Enable responsiveness
                                                            maintainAspectRatio: false,
                                                        },
                                                    });
                                                </script>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> 
                        </div>
                        <!-- Table Element -->
                        <div class="card border-0">
                            <div class="card-header">
                                <h5 class="card-title">Basic Table</h5>
                                <h6 class="card-subtitle text-muted text-center">
                                    Patient List
                                </h6>
                            </div>
                            <div class="card-body">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th scope="col">#</th>
                                            <th scope="col">First</th>
                                            <th scope="col">Last</th>
                                            <th scope="col">Handle</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th scope="row">1</th>
                                            <td>Mark</td>
                                            <td>Otto</td>
                                            <td>@mdo</td>
                                        </tr>
                                        <tr>
                                            <th scope="row">2</th>
                                            <td>Jacob</td>
                                            <td>Thornton</td>
                                            <td>@fat</td>
                                        </tr>
                                        <tr>
                                            <th scope="row">3</th>
                                            <td colspan="2">Larry the Bird</td>
                                            <td>@twitter</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    {% endblock %}
                </main>
                <a href="#" class="theme-toggle">
                    <i class="fa-regular fa-moon"></i>
                    <i class="fa-regular fa-sun"></i>
                </a>
             
                  
        </div>
    </div>
<!-- scripts for notification start-->

<script>
    // setup chat socket
    const notifySocket = new WebSocket(
        'ws://'
        + window.location.host
        + '/ws/notify/'
    );

    // Array to store all notifications
    let notifications = [];

    // Array to store unseen notifications
    let unseenNotifications = [];

    // on socket open
    notifySocket.onopen = function (e) {
        console.log('Socket successfully connected.');
        // loadNotifications(); // Load notifications from the server when the socket is opened
    };

    // on socket close
    notifySocket.onclose = function (e) {
        console.log('Socket closed unexpectedly');
    };

    // on receiving message on group
    notifySocket.onmessage = function (e) {
        const data = JSON.parse(e.data);
        const message = data.message;
        // Call the setMessage function to add the new li element
        setMessage(message);
    };

    function setMessage(message) {
    // Create a new anchor element
    var newAnchor = document.createElement('a');
    newAnchor.className = 'dropdown-item text-wrap unseen'; // Add the "unseen" class
    newAnchor.href = '#';
    newAnchor.textContent = message; // Set the text content of the anchor to the received message
    
    // Get the ul element with the id "notificationList"
    var ulElement = document.getElementById('notificationList');
    
    // Append the new anchor element to the ul element
    ulElement.appendChild(newAnchor);
    
    // Add the notification to the array
    notifications.push(newAnchor);
    
    // Add the unseen notification to the unseen array
    unseenNotifications.push(newAnchor);
    
    // Get the current count of unseen notifications
    var count = unseenNotifications.length;
    
    // Update the count on the bell icon
    document.getElementById('bellCount').setAttribute('data-count', count);
    
    // Decrease the count by 1 when the user views the notification
    newAnchor.addEventListener('click', function() {
        if (count > 0) {
            count -= 1;
            document.getElementById('bellCount').setAttribute('data-count', count);
            newAnchor.classList.remove('unseen'); // Remove the "unseen" class
        }
    });
}

    
    


</script>
<!-- scripts for notification end-->

<script src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script>

  function googleTranslateElementInit() {
    new google.translate.TranslateElement(
      { pageLanguage: 'en', defaultLanguage: 'en' },
      'google_translate_element'
    );
  } 
</script>
    <!-- Jquery Library-->
    <script src="{% static 'js2/jquery-3.2.1.min.js' %}"></script>
    <!-- Popper Library-->
    <script src="{% static 'js2/popper.min.js' %}"></script>
    <!-- Bootstrap Library-->
    <script src="{% static 'js2/bootstrap.min.js' %}"></script>

    <!-- Datatable  -->
    <script src="{% static 'datatable/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'datatable/dataTables.bootstrap4.min.js' %}"></script>

    <!-- Custom Script-->
    <script src="{% static 'js2/custom.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'js/scripts.js' %}"></script>
</body>

</html>