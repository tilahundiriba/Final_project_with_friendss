{% extends 'admin_dash/web_home.html' %}

{% load static %}
{% block content %}
<!DOCTYPE html>
<html>


<!-- Mirrored from www.konnectplugins.com/proclinic/Horizontal/login.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 Jan 2022 10:42:12 GMT -->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	
	<title>Login</title>

	<!-- Fav  Icon Link -->
	<link rel="shortcut icon" type="image/png" href="{% static 'images2/fav.png' %}">
	<!-- Bootstrap core CSS -->
	<link rel="stylesheet" href="{% static 'css2/bootstrap.min.css' %}">
	<!-- themify icons CSS -->
	<link rel="stylesheet" href="{% static 'css2/themify-icons.css' %}">
	<!-- Animations CSS -->
	<link rel="stylesheet" href="{% static 'css2/animate.css' %}">
	<!-- Main CSS -->
	<link rel="stylesheet" href="{% static 'css2/styles.css' %}">
	<link rel="stylesheet" href="{% static 'css2/green.css' %}" id="style_theme">
	<link rel="stylesheet" href="{% static 'css2/responsive.css' %}">
	<!-- morris charts -->
	<link rel="stylesheet" href="{% static 'charts/css/morris.css' %}">
	<!-- jvectormap -->
	<link rel="stylesheet" href="{% static 'css2/jquery-jvectormap.css' %}">
</head>

<body class="auth-bg">

	<!-- Color Changer -->

	<!-- /Color Changer -->
	<div class="wrapper">
		<!-- Page Content  -->
		<div id="content">
			<div class="container">
				<div class="row">
					<div class="col-sm-6 auth-box">
						<div class="proclinic-box-shadow">
							<h3 class="widget-title">Change Your Credentials</h3>
							<form action="{% url 'change_credentials' %}" method="post" onsubmit="return validateCredentialsForm()">
								{% csrf_token %}
								<!-- form-group -->
								<div class="form-group row">
									<div class="col-sm-12">
										<input name="username" placeholder="New Username" class="form-control" id="username" onkeyup="checkUsernameLength()">
										<div id="usernameError" class="text-danger"></div>
									</div>
								</div>
								<!-- /.form-group -->
								<!-- form-group -->
								<div class="form-group row">
									<div class="col-sm-12">
										<input type="password" placeholder="Current Password" name="current_password" class="form-control">
										<div id="currentPasswordError" class="text-danger"></div>
									</div>
								</div>
								<div class="form-group row">
									<div class="col-sm-12">
										<input type="password" placeholder="New Password" name="new_password" class="form-control" id="newPassword" onkeyup="checkPasswordStrength()">
										<div id="newPasswordStrength" class="password-strength"></div>
										<div id="newPasswordError" class="text-danger"></div>
									</div>
								</div>
								<div class="form-group row">
									<div class="col-sm-12">
										<input type="password" placeholder="Confirm New Password" name="confirm_new_password" class="form-control" id="confirmNewPassword" onkeyup="comparePasswords()">
										<div id="confirmPasswordError" class="text-danger"></div>
									</div>
								</div>
								<!-- Login Button -->            
								<div class="button-btn-block">
									<input type="submit" class="btn btn-primary btn-lg btn-block" value="Change"/>
								</div>
								<!-- /Login Button -->
							</form>
							
							<script>
								function validateCredentialsForm() {
									var username = document.getElementById("username").value.trim();
									var currentPassword = document.getElementsByName("current_password")[0].value.trim();
									var newPassword = document.getElementById("newPassword").value.trim();
									var confirmNewPassword = document.getElementById("confirmNewPassword").value.trim();
							
									var usernameError = document.getElementById("usernameError");
									var currentPasswordError = document.getElementById("currentPasswordError");
									var newPasswordError = document.getElementById("newPasswordError");
									var confirmPasswordError = document.getElementById("confirmPasswordError");
							
									var isValid = true;
							
									// Check if username has more than 6 characters
									if (!username || username.length < 6) {
										usernameError.innerText = !username ? "Username is required" : "Username must contain at least 6 characters";
										document.getElementById("username").style.borderColor = "red";
										isValid = false;
									} else {
										usernameError.innerText = "";
										document.getElementById("username").style.borderColor = "";

									}
									  // Add an event listener to detect changes in the current password field
                                var currentPasswordField = document.getElementsByName("current_password")[0];
                                currentPasswordField.addEventListener("input", function() {
                                 if (currentPasswordField.value.trim().length >= 6) {
                                 currentPasswordError.innerText = "";
                                   }
                                    });
									
									
							          
									// Check if current password is empty
									if (currentPassword === "") {
										currentPasswordError.innerText = "Current Password is required";
										isValid = false;
									} else {
										currentPasswordError.innerText = "";
									}
							
									// Check if new password is empty
									if (newPassword === "" || newPassword.length < 6 || !/[^a-zA-Z0-9\s]/.test(newPassword)) {
										newPasswordError.innerText = newPassword === "" ? "New Password is required" : newPassword.length < 6 ? "New Password must be at least 6 characters" : "New Password must contain at least one special character";
										document.getElementById("newPassword").style.borderColor = "red";
										isValid = false;
									} else {
										newPasswordError.innerText = "";
										document.getElementById("newPassword").style.borderColor = "";
									}
									
									// Check if confirm new password matches new password
									if (confirmNewPassword !== newPassword) {
										confirmPasswordError.innerText = "Passwords do not match";
										isValid = false;
									} else {
										confirmPasswordError.innerText = "";
									}
							
									return isValid;
								}
							
								function checkPasswordStrength() {
									var password = document.getElementById("newPassword").value;
									var strength = document.getElementById("newPasswordStrength");
									var usernameError = document.getElementById("usernameError");
								
									var color = "";
									var strengthText = "";
								
									var criteriaMet = 0;
									if (password.length >= 6) criteriaMet++;
									if (password.length > 7 && /\d/.test(password)) criteriaMet++;
									if (password.length > 8 && /[a-zA-Z]/.test(password)) criteriaMet++;
									if ( password.length > 10 &&/[^a-zA-Z0-9\s]/.test(password)) criteriaMet++;
								
									if (password.length === 0) {
										color = "";
										strengthText = "";
									} else if (criteriaMet === 1) {
										color = "#FFC0C0";
										strengthText = "Weak";
									} else if (criteriaMet === 2) {
										color = "#FFF0C0";
										strengthText = "Good";
									} else if (criteriaMet === 3) {
										color = "orange";
										strengthText = "Strong";
									} else if (criteriaMet === 4) {
										color = "#90EE90";
										strengthText = "Very Strong";
										// If password meets criteria, hide username error message
										usernameError.innerText = "";
										document.getElementById("username").style.borderColor = "";
									}
								
									strength.style.backgroundColor = color;
									strength.innerText = strengthText;
									 // If password meets criteria, change border color to bold green
                             if (criteriaMet === 4) {
                               document.getElementById("newPassword").style.borderColor = "#90EE90";
                               document.getElementById("newPassword").style.borderWidth = "2px";
                           } else {
                               document.getElementById("newPassword").style.borderColor = "";
                               document.getElementById("newPassword").style.borderWidth = "";
                                 }
									if (password.length >= 6 && newPasswordError.innerText !== "") {
										newPasswordError.innerText = "";
										document.getElementById("newPassword").style.borderColor = "";
									}
								}
								
							
								function comparePasswords() {
									var newPassword = document.getElementById("newPassword").value;
									var confirmNewPassword = document.getElementById("confirmNewPassword").value;
									var confirmPasswordError = document.getElementById("confirmPasswordError");
							
									if (newPassword !== confirmNewPassword) {
										confirmPasswordError.innerText = "Passwords do not match";
									} else {
										confirmPasswordError.innerText = "";
									}
								}
							
								function checkUsernameLength() {
									var username = document.getElementById("username").value.trim();
									var usernameError = document.getElementById("usernameError");
							
									if (username.length < 6) {
										usernameError.innerText = "Username must contain at least 6 characters";
										document.getElementById("username").style.borderColor = "red";
									} else {
										usernameError.innerText = "";
										document.getElementById("username").style.borderColor = "";
									}
								}
							</script>
							
							
							
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- /Page Content  -->
	</div>
	<!-- Jquery Library-->
	<script src="{% static 'js2/jquery-3.2.1.min.js' %}"></script>
	<!-- Popper Library-->
	<script src="{% static 'js2/popper.min.js' %}"></script>
	<!-- Bootstrap Library-->
	<script src="{% static 'js2/bootstrap.min.js' %}"></script>
	<!-- morris charts -->
	<script src="{% static 'js2/custom-morris.js' %}"></script>

	<!-- Custom Script-->
	<script src="{% static 'js2/custom.js' %}"></script>
</body>


<!-- Mirrored from www.konnectplugins.com/proclinic/Horizontal/login.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 Jan 2022 10:42:12 GMT -->
</html>
{% endblock %}
